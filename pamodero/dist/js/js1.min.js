var paraJack={method:{run:null,pause:null,fomateTimeStr:null},dom:{getDomNodes:null,updateTimeShow:null,reset:null,setEvent:null}};!function(){var e={breakTime:5,sessionTime:25,isInSession:!0,timeLeft:60,oldTime:0,timeSpend:0,timerId:null,isOn:!1},n={$timeShow:null,$left:null,$topInner:null,$botInner:null,$header:null,$control:null,$breakCtrl:null,$sessionCtrl:null,$piston:null,$playPause:null};paraJack.method.run=function(){e.isOn=!0,e.oldTime=Date.now(),n.$piston.fadeOut(1e3),n.$playPause.removeClass("glyphicon-play").addClass("glyphicon-pause"),paraJack.dom.updateTimeShow(e.timeLeft),e.timerId=setInterval(function(){var n=Date.now(),i=60*(e.isInSession?e.sessionTime:e.breakTime);e.timeSpend+=n-e.oldTime,e.oldTime=n,e.timeLeft=Math.ceil(i-e.timeSpend/1e3),paraJack.dom.updateTimeShow(e.timeLeft),e.timeLeft<=0&&(e.isInSession=!e.isInSession,paraJack.dom.reset())},1e3)},paraJack.method.pause=function(){clearInterval(e.timerId),e.isOn=!1;var i=Date.now(),t=60*(e.isInSession?e.sessionTime:e.breakTime);e.timeSpend+=i-e.oldTime,e.timeLeft=Math.ceil(t-e.timeSpend/1e3),n.$piston.fadeIn(1e3),n.$playPause.removeClass("glyphicon-pause").addClass("glyphicon-play")},paraJack.method.fomateTimeStr=function(e){if("number"==typeof e&&e>=0){var n=("0"+Math.floor(e/3600)).slice(-2),i=("0"+Math.floor(e%3600/60)).slice(-2),t=("0"+Math.floor(e%60)).slice(-2);return"00"!==n?n+":"+i+":"+t:i+":"+t}return"00:00"},paraJack.dom.getDomNodes=function(){n.$timeShow=$(".time-show"),n.$left=n.$timeShow.find(".left"),n.$topInner=n.$timeShow.find(".top .inner"),n.$botInner=n.$timeShow.find(".bot .inner"),n.$header=$("header"),n.$control=$(".control"),n.$breakCtrl=n.$control.find(".break"),n.$sessionCtrl=n.$control.find(".session"),n.$piston=n.$timeShow.find(".piston"),n.$playPause=n.$timeShow.find(".switch")},paraJack.dom.updateTimeShow=function(){var i=60*(e.isInSession?e.sessionTime:e.breakTime),t=100*e.timeLeft/i+"%",o=100-100*e.timeLeft/i+"%",a=paraJack.method.fomateTimeStr(e.timeLeft);n.$left.html(a),n.$topInner.css({height:t}),n.$botInner.css({height:o})},paraJack.dom.reset=function(){e.timeOld=Date.now(),e.timeSpend=0,e.timeLeft=60*(e.isInSession?e.sessionTime:e.breakTime),n.$breakCtrl.find(".time-len").html(e.breakTime),n.$sessionCtrl.find(".time-len").html(e.sessionTime),n.$left.html(paraJack.method.fomateTimeStr(e.timeLeft)),n.$topInner.css({height:"100%"}),n.$botInner.css({height:"0%"}),e.isInSession?(n.$breakCtrl.removeClass("active"),n.$sessionCtrl.addClass("active")):(n.$breakCtrl.addClass("active"),n.$sessionCtrl.removeClass("active"))},paraJack.dom.setEvent=function(){n.$control.on("click",".break .add",function(){e.isOn||(e.breakTime+=1,paraJack.dom.reset())}),n.$control.on("click",".break .minus",function(){e.isOn||(e.breakTime-=e.breakTime>1?1:0,paraJack.dom.reset())}),n.$control.on("click",".session .add",function(){e.isOn||(e.sessionTime+=1,paraJack.dom.reset())}),n.$control.on("click",".session .minus",function(){e.isOn||(e.sessionTime-=e.breakTime>1?1:0,paraJack.dom.reset())}),n.$control.on("click",".swap",function(){e.isOn||(e.isInSession=!e.isInSession,paraJack.dom.reset())}),n.$timeShow.on("click",".switch",function(){e.isOn?paraJack.method.pause():paraJack.method.run()})}}(),$(document).ready(function(){paraJack.dom.getDomNodes(),paraJack.dom.setEvent(),paraJack.dom.reset()});